package services

import (
	"encoding/hex"
	"fmt"
	"kbtg.tech/template/interfaces"
	"strings"
)

type SocketService struct {
	Filepath string
	Filename string
	interfaces.IPCBService
}

func LeftPad2Len(s string, padStr string, overallLen int) string {
	var padCountInt int
	padCountInt = 1 + ((overallLen - len(padStr)) / len(padStr))
	var retStr = strings.Repeat(padStr, padCountInt) + s
	return retStr[(len(retStr) - overallLen):]
}

func buildMessage(in string) string {
	h := fmt.Sprintf("%X", len(in))
	str := LeftPad2Len(h, "0", 4)
	bs, _ := hex.DecodeString(str)
	return string(bs) + in
}

func (mock *SocketService) Execute() []byte {
	s := "027052455452434F4D4143435444544C534D572020203530395F32303138303630355F6267313132313131333831332E34393531343439353935393335373831333234202036363820203230313831313231313133393431303020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020303136313933323837364EAAE8C7A7E2AAB5D420E0C1C2ECC7D5ADD22020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202043484F554E474A4F5449204D4556454559412020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020203034303337343231303230313030312020202020202020202020202020202020202020202020202020202020202020202020"
	data, err := hex.DecodeString(s)
	if err != nil {
		panic(err)
	}
	//fmt.Printf("% x", data)
	return data
	//return []byte(buildMessage("RETRCOMACCTDTLSMW   509_20180605_bg1121113813.4951449595935781324  668  2018112111394100                                                                                                                   0161932876N˨ǧ⪵Ԡႂ툕Β                                                                                                                                                                   CHOUNGJOTI MEVEEYA                                                                                                                                                                  040374210201001                                   "))
}
